(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(e,t,n){e.exports=n(56)},32:function(e,t,n){},33:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),s=n(22),r=n.n(s),i=(n(32),n(6)),l=n(7),c=n(9),u=n(8),m=n(10);n(33);function h(e,t){for(var n=Array(50).fill("none"),o=e.toString(2).padStart(64,"0"),a=t.toString(2).padStart(64,"0"),s=o.length,r=a.length,i=0;i<50;i++)"1"===o.charAt(s-i)?n[i]="one":"1"===a.charAt(r-i)?n[i]="two":n[i]="none";return n}function d(e){return{0:"e",1:"d",2:"c",3:"b",4:"a"}[~~(e/10)]+(10-e%10)}function v(e){for(var t=0;t<e.length;t++)if(0===t)var n=d(e[t]);else n=n+"-"+d(e[t]);return n}function w(e,t,n,o){var a,s,r=[];a=t%2!==~~(t/10)%2?[-11,-10,-9,-1,1,9,10,11]:[-10,-1,1,10];for(var i=0;i<a.length;i++){var l=t+a[i];if(l%10!==0&&(("none"===e[l]||"none eaten"===e[l])&&!n.includes(l)))if(o){var c=n.length;if(c>1){var u=n[c-2];s=n[c-1]-u}else s=0,0;_(e,t,a[i])&&a[i]!==s&&r.push(l)}else r.push(t+a[i])}return r}function _(e,t,n){return"two"===e[t+2*n]||"two"===e[t-n]}function p(e,t){return!!t||function(e){for(var t=e.reduce((function(e,t,n){return"one"===t?e.concat(n):e}),[]),n=[],o=0;o<t.length;o++)if(w(e,t[o],n,!0).length>=1)return!0;return!1}(e)}function f(e){var t;return"vakyloha"===e?t=["none","one","one","one","one","none eaten","one","one","one","one","none","one","one","one","one","none eaten","one","one","one","one","none","one","two","one","two","two","one","two","one","two","none","two","two","two","two","none","two","two","two","two","none","two","two","two","two","two","two","two","two","two"]:"kobana"===e?t=["none","one","one","one","one","one","one","one","one","one","none","one","one","one","one","one","one","one","one","one","none","one","two","none eaten","none","two","one","two","one","two","none","two","two","two","two","two","two","two","two","two","none","two","two","two","two","two","two","two","two","two"]:"fohy"===e?t=["none","one","one","one","one","one","one","one","one","one","none","one","one","one","one","one","one","one","one","one","none","one","two","one","none","two","none eaten","two","one","two","none","two","two","two","two","two","two","two","two","two","none","two","two","two","two","two","two","two","two","two"]:"havia"===e?t=["none","one","one","none eaten","one","one","one","one","one","one","none","one","one","one","none eaten","one","one","one","one","one","none","one","two","one","two","two","one","two","one","two","none","two","two","two","two","two","none","two","two","two","none","two","two","two","two","two","two","two","two","two"]:"havanana"===e&&(t=["none","one","one","one","one","one","one","none eaten","one","one","none","one","one","one","one","one","none eaten","one","one","one","none","one","two","one","two","two","one","two","one","two","none","two","two","two","none","two","two","two","two","two","none","two","two","two","two","two","two","two","two","two"]),t}var b=n(24),S=n.n(b),g=n(58),y=n(59),E=n(26),R=n(60),C=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidUpdate=function(){n.state.computer_move&&(n.setState({is_moving:!0}),n.wait_computer(),n.setState({computer_move:!1,is_moving:!1}))},n.restart_board=function(){n.setState({history:[{boardState:h(173538815,562399469895680)}],history_turn:[{boardState:h(173538815,562399469895680),turn_id:0,human:"",computer:""}],selected:null,step_number:0,has_moved:null,available_move:[],must_choose:[],status:null})},n.undo_move=function(){var e,t,o,a=n.state.turn_number;a<=2?n.restart_board():(a%2===0?(e=n.state.history_turn[a-2].step_number,t=n.state.history.slice(0,e+1),o=n.state.history_turn.slice(0,a-1),a-=1):(e=n.state.history_turn[a-1].step_number,o=n.state.history_turn.slice(0,a),t=n.state.history.slice(0,e+1)),n.setState({history:t,history_turn:o,selected:null,available_move:[],visited:[],must_choose:[],new_pos:null,step_number:e,turn_number:a-1}))},n.resetState=function(e){var t,o=v(n.state.visited),a=n.state.turn_number;if(0===a){var s;switch(o){case"b5-c5":s="vakyloha";case"c4-c5":"none eaten"===e[27]?s="kobana":"none eaten"===e[24]&&(s="fohy");case"b4-c5":s="havanana";case"b6-c5":s="havia"}n.setState({game_type:s})}a+=1;var r={boardState:e,step_number:n.state.history.length,turn_id:a,human:o,computer:""};t=n.AppendHistory(r),n.setState({history:n.state.history.concat([{boardState:e}]),selected:null,computer_move:!1,available_move:[],visited:[],has_moved:!1,must_choose:[],step_number:n.state.history.length,status:"Computer is moving",history_turn:t,turn_number:a})},n.pass_game=function(){if(n.state.has_moved){var e=v(n.state.visited),t=n.state.turn_number+1,o={boardState:n.getCurrentState(),step_number:n.state.history.length,turn_id:t,human:e,computer:""};n.setState({was_capture:!0,computer_move:!0,selected:null,status:"Computer is moving",available_move:[],visited:[],has_moved:!1,must_choose:[],history_turn:n.AppendHistory(o),turn_number:t})}},n.handle_game_type=function(e){var t=e.target.value;n.restart_board(),n.setState({history:[{boardState:f(t)}],history_turn:[{boardState:f(t),turn_id:0,human:"",computer:"",game_type:t}],status:"human to move"})},n.handle_move_first=function(e){n.setState({move_first:e.target.value})},n.handle_depth=function(e){n.setState({depth:e.target.value})},n.onClick=function(e){if(!n.state.computer_move)if("computer"!==n.state.move_first||n.state.status){var t,o,a,s,r,i,l=n.state.must_choose,c=n.state.selected,u=n.getCurrentState(),m=n.state.visited,h=n.state.has_moved;if(l.length>1){if(l.includes(e)){var d=n.state.new_pos;return a=function(e,t,n,o){var a,s,r=n-t;for(t+2*r===o?s=n+(a=r):t-r===o&&(s=n+2*(a=-r)),(e=e.map((function(e){return"none eaten"===e?"none":e})))[t]="none",e[n]="one";"two"===e[s];)e[s]="none eaten",s+=a;return e}(u,c,d,e),h||m.push(c),m.push(d),o=w(a,d,m,!0),console.log(o),console.log(d),console.log(m),o.length>0?void n.setState({history:n.state.history.concat([{boardState:a,currentPlayer:!0}]),must_choose:[],selected:d,visited:m,available_move:o,has_moved:!0,step_number:n.state.history.length}):(n.resetState(a),void n.setState({was_capture:!0,selected:null,computer_move:!0,visited:[]}))}alert("you must choose")}else{s=p(u,n.state.has_moved);var v=n.state.available_move;if(c!==e||h){if(c&&"one"===u[e]&&!h){if(!((o=w(u,e,m,s)).length>0))return;n.setState({selected:e,available_move:o})}if(!c&&!n.state.computer_move){if("one"!==u[e])return;if(!((o=w(u,e,m,s)).length>0))return;n.setState({selected:e,available_move:o})}if(v.includes(e)){if(r=c-(t=e-c),"two"===u[i=c+2*t]&&"two"===u[r])return n.setState({must_choose:[i,r],new_pos:e}),void alert("must choose");if(a=function(e,t,n,o){var a,s;for("two"===(e=e.map((function(e){return"none eaten"===e?"none":e})))[t+2*o]?s=n+(a=o):"two"===e[t-o]&&(s=n+2*(a=-o)),e[t]="none",e[n]="one";"two"===e[s];)e[s]="none eaten",s+=a;return e}(u,c,e,t),h||m.push(c),m.push(e),!s)return n.resetState(a),void n.setState({was_capture:!1,computer_move:!0,visited:[]});if(!((o=w(a,e,m,s)).length>=1))return n.resetState(a),void n.setState({was_capture:!0,computer_move:!0,visited:[]});n.setState({history:n.state.history.concat([{boardState:a,currentPlayer:!0}]),selected:e,available_move:o,has_moved:!0,visited:m,must_choose:[],step_number:n.state.history.length})}}else n.setState({selected:null,available_move:[]})}}else alert("Choose Computer First Move [Game Type]")},n.state={width:100,height:100,history:[{boardState:h(173538815,562399469895680)}],selected:null,step_number:0,has_moved:null,available_move:[],visited:[],must_choose:[],computer_move:!1,move_log:[],move_logback:[],states:[],is_moving:!1,was_capture:!1,status:null,move_first:"human",depth:3,move_string:[],history_turn:[{boardState:[],turn_id:0,human:"",computer:""}],turn_number:null},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"computer_turn",value:function(e,t,n){var o=this,a={boardstate:e,was_capture:t,depth:n},s=[],r=[];S.a.post("/pass",a).then((function(t){for(var n,a=t.data.move_log,i=t.data.movedict,l=a[0],c=0;c<a.length;c++){e[l]="none",n=a[c],e[n]="two",e=e.map((function(e){return"none eaten"===e?"none":e}));for(var u=i[n],m=0;m<u.length;m++)e[u[m]]="none eaten";l=n,s=s.concat([l]),r=r.concat([e])}o.setState({move_log:s,move_logback:s,states:r}),setTimeout((function(){o.iterate_move(s,r)}),1e3)})).catch((function(e){alert(e)}))}},{key:"iterate_move",value:function(e,t){var n=this;setTimeout((function(){var o=e.shift(),a=t.shift(),s=n.state.visited;if(0===e.length)return s.push(o),n.resetState(a),void n.setState({computer_move:!1,visited:[]});s.push(o),n.setState({history:n.state.history.concat([{boardState:a}]),selected:o,step_number:n.state.history.length-1,visited:s}),n.iterate_move(e,t)}),1e3)}},{key:"wait_computer",value:function(){var e=this.getCurrentState(),t=this.state.was_capture,n=this.state.depth;this.computer_turn(e,t,n)}},{key:"AImoves",value:function(){var e=this.state.move_log,t=this.state.states;this.iterate_move(e,t)}},{key:"getCurrentState",value:function(){var e=this.state.history;return(e.length>1?(e=e.slice(0,this.state.step_number+1))[e.length-1]:e[0]).boardState}},{key:"AppendHistory",value:function(e){return this.state.history_turn.concat([e])}},{key:"render",value:function(){var e,t=this,n=this.getCurrentState(),o=this.state.selected,s=this.state.available_move,r=function(e){for(var t=0,n=0,o=0;o<50;o++)"one"===e[o]?++t:"two"===e[o]&&++n;return 0===t?"Computer WIN":0===n?"You WIN":null}(n),i=this.state.must_choose;r&&(alert("game over: "+r),this.restart_board()),e=this.state.is_moving?"Computer is moving...":i.length?"Choose: "+d(i[0])+" or "+d(i[1]):o?"Piece selected: "+d(o):"Human to move";var l=function(e){for(var t=[],n=e.length,o=0;o<n;o++)o%2===0?t.push({turn:o/2+1,human:e[o].human,computer:" "}):t[t.length-1].computer=e[o].human;return t}(this.state.history_turn.slice(1)),c="human"===this.state.move_first;return console.log(this.state),a.a.createElement("div",{className:"main"},a.a.createElement(g.a,{fluid:!0,id:"container1"},a.a.createElement(y.a,{noGutters:!0},a.a.createElement(E.a,{xs:12,sm:12,md:8},a.a.createElement(R.a,{className:"form_command"},a.a.createElement(R.a.Row,{className:"justify-content-md-center"},a.a.createElement(R.a.Group,{as:E.a,md:"3",xs:"4",controlId:"opponent"},a.a.createElement(R.a.Label,null,"Move First"),a.a.createElement(R.a.Control,{value:this.state.move_first,as:"select",onChange:this.handle_move_first},a.a.createElement("option",{value:"computer"},"Computer"),a.a.createElement("option",{value:"human"},"Human"))),a.a.createElement(R.a.Group,{as:E.a,md:"3",xs:"4",controlId:"move_first"},a.a.createElement(R.a.Label,null,"Game Type"),a.a.createElement(R.a.Control,{disabled:c,value:this.state.game_type,as:"select",onChange:this.handle_game_type},a.a.createElement("option",{value:"vakyloha"},"Vaky loha"),a.a.createElement("option",{value:"kobana"},"Kobana"),a.a.createElement("option",{value:"fohy"},"Fohy"),a.a.createElement("option",{value:"havia"},"Havia"),a.a.createElement("option",{value:"havanana"},"Havanana"))),a.a.createElement(R.a.Group,{as:E.a,md:"3",xs:"4",controlId:"depth"},a.a.createElement(R.a.Label,null,"Depth"),a.a.createElement(R.a.Control,{value:this.state.depth,as:"select",onChange:this.handle_depth},a.a.createElement("option",null,"1"),a.a.createElement("option",null,"2"),a.a.createElement("option",null,"3"),a.a.createElement("option",null,"4"),a.a.createElement("option",null,"5"))))))),a.a.createElement(y.a,{noGutters:!0,className:"windowa"},a.a.createElement(E.a,{xs:12,sm:12,md:8,className:"game_windows row-eq-height"},a.a.createElement("div",{className:"aspect_ratiodiv"},a.a.createElement(g.a,{fluid:!0,className:"BoardCont"},a.a.createElement(y.a,{noGutters:!0,className:"crosscont"},a.a.createElement("div",{className:"aspect_ratiodiv1"},a.a.createElement(j,{boardstate:n,selected:o,available_move:s,onClick:function(e){return t.onClick(e)}}))),a.a.createElement(y.a,{noGutters:!0,className:"command_button"},a.a.createElement(E.a,{style:{textAlign:"center"}},a.a.createElement("button",{className:"game_button",onClick:function(){return t.restart_board()}},"Restart")),a.a.createElement(E.a,{style:{textAlign:"center"}},a.a.createElement("button",{className:"game_button",onClick:function(){return t.pass_game()}},"Pass")),a.a.createElement(E.a,{style:{textAlign:"center"}},a.a.createElement("button",{className:"game_button",onClick:function(){return t.undo_move()}},"Undo")))))),a.a.createElement(E.a,{xs:12,sm:12,md:4,className:"status_window row-eq-height"},a.a.createElement(N,{status:e,move_string:l})))))}}]),t}(a.a.Component),k=function(e){var t=e.id,n=d(t),o=e.selected,s=e.available,r="player-"+e.stoneClasses+" "+n;return t===o&&(r+="  selected"),s.indexOf(t)>-1&&(r+="  available"),a.a.createElement("div",{className:r,id:t,onClick:e.onClick})},N=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderTableData",value:function(){return this.props.move_string.map((function(e,t){var n=e.turn,o=e.human,s=e.computer;return a.a.createElement("tr",{key:n},a.a.createElement("td",{style:{textAlign:"center"}},n),a.a.createElement("td",null,o),a.a.createElement("td",null,s))}))}},{key:"render",value:function(){var e=this.props.status;return a.a.createElement("div",{className:"box_status"},a.a.createElement(g.a,{fluid:!0,className:"status_show"},a.a.createElement("h3",null,"Game Status"),a.a.createElement(y.a,{noGutters:!0,className:"game_status"},a.a.createElement(E.a,{className:"col-centered",id:"log_status"},a.a.createElement("div",{className:"center-me",id:"statusbox"}," ",e))),a.a.createElement("h3",null,"Moves"),a.a.createElement(y.a,{noGutters:!0,className:"moves_log"},a.a.createElement(E.a,{className:"moves_tables"},a.a.createElement("div",{id:"statusall"},a.a.createElement("table",{id:"moves",style:{width:"100%",overflow:"scroll"}},a.a.createElement("tbody",null,a.a.createElement("tr",{style:{borderBottom:"1px dashed",borderCollapse:"collapse",position:"sticky"}},a.a.createElement("th",{width:"20%",style:{textAlign:"center"}},"ID"),a.a.createElement("th",{width:"40%"},"Human"),a.a.createElement("th",{width:"40%"},"Computer")),this.renderTableData())))))))}}]),t}(a.a.Component),j=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).RenderStones=function(e){var t=n.props.boardstate[e],o=n.props.selected,s=n.props.available_move;return a.a.createElement(k,{stoneClasses:t,id:e,selected:o,available:s,onClick:function(){return n.props.onClick(e)}})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"rowcross"},a.a.createElement("div",{className:"crossed"},this.RenderStones(49),this.RenderStones(48),this.RenderStones(39),this.RenderStones(38)),a.a.createElement("div",{className:"crossed"},this.RenderStones(47),this.RenderStones(46),this.RenderStones(37),this.RenderStones(36)),a.a.createElement("div",{className:"crossed"},this.RenderStones(45),this.RenderStones(44),this.RenderStones(35),this.RenderStones(34)),a.a.createElement("div",{className:"crossed_left"},this.RenderStones(43),this.RenderStones(42),this.RenderStones(41),this.RenderStones(33),this.RenderStones(32),this.RenderStones(31)),a.a.createElement("div",{className:"crossed_bottom"},this.RenderStones(29),this.RenderStones(28),this.RenderStones(19),this.RenderStones(18),this.RenderStones(9),this.RenderStones(8)),a.a.createElement("div",{className:"crossed_bottom"},this.RenderStones(27),this.RenderStones(26),this.RenderStones(17),this.RenderStones(16),this.RenderStones(7),this.RenderStones(6)),a.a.createElement("div",{className:"crossed_bottom"},this.RenderStones(25),this.RenderStones(24),this.RenderStones(15),this.RenderStones(14),this.RenderStones(5),this.RenderStones(4)),a.a.createElement("div",{className:"crossed_bottom_left"},this.RenderStones(23),this.RenderStones(22),this.RenderStones(21),this.RenderStones(13),this.RenderStones(12),this.RenderStones(11),this.RenderStones(3),this.RenderStones(2),this.RenderStones(1)))}}]),t}(a.a.Component),x=C;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(55);r.a.render(a.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.ea7f1d5a.chunk.js.map